# 📘 SoulStay 프로젝트 기획서

---

## 🏷️ 프로젝트 주제  

**Hugging Face 기반 감정 분석과 RAG 검색을 결합한 호텔 고객 경험 관리 플랫폼**

호텔 고객의 피드백 데이터를 직접 학습한 한국어 감정 분류 모델을 통해 분석하고,
LangChain + Chroma 기반 RAG 구조로 유사 피드백을 검색하여
감정의 맥락을 해석하고 개선 인사이트를 제공하는 AI 고객경험 관리 시스템입니다.

---

## 💡 문제 정의

호텔 산업의 핵심은 고객 감정 데이터의 해석입니다.
기존에는 키워드 중심의 단순 분석으로 인해 고객의 실제 감정과 맥락이 왜곡되었고,
영어 기반 감정 분석 모델은 한국어 리뷰의 뉘앙스를 정확히 반영하지 못했습니다.

또한, 감정 분석 결과가 단발성으로 끝나거나 축적되지 않아
유사 불만이나 트렌드를 파악하기 어려운 문제가 있었습니다.

SoulStay는 이 문제를 해결하기 위해

- 로컬에서 직접 학습한 한국어 감정 분석 모델 (Hugging Face WhitePeak 기반)
- LangChain + Chroma RAG 구조를 통한 의미 기반 검색
- FastAPI + PostgreSQL로 데이터 관리
- APScheduler를 통한 일일 감정 통계 자동화

를 결합하여 호텔 운영자가 고객의 감정과 그 원인(reason)을 정량적으로 분석하고
빠르게 대응할 수 있도록 돕습니다.

---

## ⚙️ 시스템 구성

| 구성 요소 | 역할 |
|-----------|------|
| 🧱 **FastAPI** | 감정 분석 API, 챗봇 및 백엔드 서비스 |
| 🧠 **Hugging Face 모델** | 한국어 감정 분석 수행 (WhitePeak/bert-base-cased-Korean-sentiment) |
| 🔍 **LangChain + ChromaDB** | 벡터 기반 유사 피드백 검색 (RAG 구조) |
| 🗄️ **PostgreSQL** | 감정 로그, 사용자 데이터, 통계 저장 |
| ⏰ **APScheduler** | 일일 감정 요약 자동화 (Daily Summary) |
| 🎨 **Jinja2 + Bootstrap5** | 관리자용 웹 인터페이스 |
| 🤖 **Chatbot Service** | 감정 + 맥락 기반 대화형 피드백 응답 생성 (추가 예정) |

---

## 🧠 모델링 / 처리 흐름

1. 사용자가 리뷰 또는 피드백을 입력
2. 로컬 감정 분석 모델이 감정(emotion)과 이유(reason)를 분류
3. 결과를 PostgreSQL에 저장
4. 동일 텍스트를 임베딩하여 ChromaDB에 추가
5. LangChain RAG가 유사 피드백을 검색 및 문맥 추천
6. APScheduler가 매일 자정 통계 요약 생성

### 🔁 처리 파이프라인
```
사용자 입력
   ↓
FastAPI (EmotionService)
   ↓
Hugging Face 감정 분석 모델
   ↓
PostgreSQL (emotion_logs)
   ↓
LangChain + Chroma (RAG 검색)
   ↓
APScheduler (일일 감정 요약)
   ↓
관리자 대시보드
```

---

## 💾 사용 데이터

| 구분 | 내용 |
|------|------|
| 📝 **입력 데이터** | 호텔 고객 리뷰, 설문 피드백, 상담 대화 등 |
| 🎯 **분석 대상** | 텍스트의 감정 (긍정 / 부정 / 중립) 및 감정 근거(reason) |
| 📤 **출력 데이터** | 예: `{ "emotion": "부정", "reason": "직원의 응대가 불친절함" }` |
| 🗃️ **저장 구조** | PostgreSQL 테이블: `emotion_logs`, `daily_summaries` |
| 🔍 **데이터 확보 계획** | 샘플 데이터 기반 검증 후 실제 리뷰 데이터 확장 |

---

## 🧩 기술적 특징

- ✅ **로컬 LLM 학습 구조**: API 의존도를 최소화하고 프로젝트 독립성 확보
- ✅ **RAG 기반 검색**: 단순 감정 분류를 넘어 유사 사례와 맥락 추천
- ✅ **FastAPI 비동기 처리**: 고속 감정 분석 및 데이터 저장
- ✅ **자동화 통계 시스템**: APScheduler 기반 감정 트렌드 리포트
- ✅ **확장 가능한 구조**: 향후 챗봇 서비스, 다국어 모델 연동 가능

---

## 👥 R&R (역할 및 담당)

| 구분 | 담당자 | 주요 역할 |
|------|--------|-----------|
| **백엔드 / AI 서비스 개발** | 원태식 | FastAPI 서버 구축, 감정 분석 및 RAG 구현 |
| **데이터베이스 설계** | 원태식 | PostgreSQL 및 SQLAlchemy ORM 구조 설계 |
| **모델 학습 / 튜닝** | 원태식 | Hugging Face 모델 fine-tuning 및 로컬 연동 |
| **자동화 / 통계** | 원태식 | APScheduler 기반 감정 요약 스케줄러 |
| **프론트엔드** | 원태식 | Jinja2 + Bootstrap5 UI 설계 |
| **시스템 통합 및 배포** | 원태식 | 로깅, 인증, 환경 설정 및 배포 관리 |

---

## 📈 향후 확장 방향

- 🤖 **대화형 챗봇 구현**: 감정 및 RAG 기반 응답 생성 (ChatbotService)
- 🗣️ **멀티모달 감정 분석**: 텍스트 + 음성 기반 확장
- 📊 **실시간 대시보드**: Streamlit 또는 Plotly 기반 시각화 대시보드