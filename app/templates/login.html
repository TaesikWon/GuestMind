{% extends "base.html" %}
{% block title %}ë¡œê·¸ì¸ - SoulStay{% endblock %}

{% block content %}
<div class="auth-section fade-in">

  <h2 class="fw-bold mb-3 text-teal">ğŸ”‘ ë¡œê·¸ì¸</h2>
  <p class="text-muted mb-4">SoulStayì— ë‹¤ì‹œ ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.</p>

  <!-- ë¡œê·¸ì¸ í¼ -->
  <form method="post" action="/auth/login" id="loginForm">
    <div class="mb-3 text-start">
      <label for="email" class="form-label fw-semibold">ì´ë©”ì¼</label>
      <input
        type="email"
        id="email"
        name="email"
        class="form-control"
        placeholder="you@example.com"
        required>
    </div>

    <div class="mb-3 text-start">
      <label for="password" class="form-label fw-semibold">ë¹„ë°€ë²ˆí˜¸</label>
      <input
        type="password"
        id="password"
        name="password"
        class="form-control"
        placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
        required>
    </div>

    {% if error %}
    <div class="alert alert-danger text-start">{{ error }}</div>
    {% endif %}

    {% if message %}
    <div class="alert alert-success text-start">{{ message }}</div>
    {% endif %}

    <!-- ë²„íŠ¼ + ìŠ¤í”¼ë„ˆ -->
    <button type="submit" class="btn btn-primary w-100 py-2 position-relative" id="loginButton">
      <span id="btnText">ë¡œê·¸ì¸</span>
      <div id="spinner" class="spinner-border spinner-border-sm text-light ms-2 d-none" role="status"></div>
    </button>
  </form>

  <!-- íšŒì›ê°€ì… ì•ˆë‚´ -->
  <div class="text-center mt-3">
    <p class="text-muted">
      ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?
      <a href="/auth/register" class="text-decoration-none text-primary fw-semibold">íšŒì›ê°€ì…</a>
    </p>
  </div>
</div>

<!-- ë¡œë”© ìŠ¤í”¼ë„ˆ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
document.getElementById('loginForm').addEventListener('submit', function() {
  const btn = document.getElementById('loginButton');
  const spinner = document.getElementById('spinner');
  const text = document.getElementById('btnText');
  spinner.classList.remove('d-none');
  text.textContent = 'ë¡œê·¸ì¸ ì¤‘...';
  btn.disabled = true;
});
</script>
{% endblock %}
