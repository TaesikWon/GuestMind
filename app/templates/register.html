{% extends "base.html" %}
{% block title %}íšŒì›ê°€ì… - SoulStay{% endblock %}

{% block content %}
<div class="auth-section fade-in">

  <h2 class="fw-bold mb-3 text-teal">ğŸ“ íšŒì›ê°€ì…</h2>
  <p class="text-muted mb-4">SoulStayì˜ ë§ì¶¤í˜• ê°ì • ë¶„ì„ ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ì„¸ìš”.</p>

  <!-- íšŒì›ê°€ì… í¼ -->
  <form method="post" action="/auth/register" id="registerForm">

    <div class="mb-3 text-start">
      <label for="name" class="form-label fw-semibold">ì´ë¦„</label>
      <input
        type="text"
        id="name"
        name="name"
        class="form-control"
        placeholder="í™ê¸¸ë™"
        required>
    </div>

    <div class="mb-3 text-start">
      <label for="email" class="form-label fw-semibold">ì´ë©”ì¼</label>
      <input
        type="email"
        id="email"
        name="email"
        class="form-control"
        placeholder="you@example.com"
        required>
    </div>

    <div class="mb-3 text-start">
      <label for="password" class="form-label fw-semibold">ë¹„ë°€ë²ˆí˜¸</label>
      <input
        type="password"
        id="password"
        name="password"
        class="form-control"
        placeholder="8ì ì´ìƒ ì…ë ¥"
        minlength="8"
        required>
    </div>

    <div class="mb-3 text-start">
      <label for="confirm_password" class="form-label fw-semibold">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
      <input
        type="password"
        id="confirm_password"
        name="confirm_password"
        class="form-control"
        placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”"
        minlength="8"
        required>
    </div>

    {% if error %}
    <div class="alert alert-danger text-start">{{ error }}</div>
    {% endif %}

    {% if message %}
    <div class="alert alert-success text-start">{{ message }}</div>
    {% endif %}

    <!-- ë²„íŠ¼ + ìŠ¤í”¼ë„ˆ -->
    <button type="submit" class="btn btn-primary w-100 py-2 position-relative" id="registerButton">
      <span id="btnText">íšŒì›ê°€ì…</span>
      <div id="spinner" class="spinner-border spinner-border-sm text-light ms-2 d-none" role="status"></div>
    </button>

  </form>

  <!-- ë¡œê·¸ì¸ ë§í¬ -->
  <div class="text-center mt-3">
    <p class="text-muted">
      ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?
      <a href="/auth/login" class="text-decoration-none text-primary fw-semibold">ë¡œê·¸ì¸</a>
    </p>
  </div>
</div>

<!-- ë¡œë”© ìŠ¤í”¼ë„ˆ ìŠ¤í¬ë¦½íŠ¸ -->
<script>
document.getElementById('registerForm').addEventListener('submit', function(event) {
  const pwd = document.getElementById('password').value;
  const confirm = document.getElementById('confirm_password').value;

  if (pwd !== confirm) {
    event.preventDefault();
    alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
    return;
  }

  const btn = document.getElementById('registerButton');
  const spinner = document.getElementById('spinner');
  const text = document.getElementById('btnText');
  spinner.classList.remove('d-none');
  text.textContent = 'ë“±ë¡ ì¤‘...';
  btn.disabled = true;
});
</script>
{% endblock %}
